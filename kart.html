<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>Karoline & Torkil ‚Äì Kart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Kart og veibeskrivelse til bryllupet til Karoline & Torkil ‚Äì Torshovparken paviljongen og M√•nefisken." />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .easter-egg-container {
      position: relative;
      cursor: pointer;
    }
    
    .easter-egg-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: transparent;
      border-radius: 12px;
      z-index: 5;
    }
    
         .interactive-map {
       position: relative;
       width: 100%;
       height: 500px;
       background: #f8f9fa;
       border-radius: 12px;
       border: 1px solid #bcd7b0;
       overflow: hidden;
       margin: 2em 0;
       box-shadow: 0 4px 20px rgba(0,0,0,0.1);
     }
    
    .map-marker {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #ff6b6b;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s;
    }
    
    .map-marker:hover {
      transform: scale(1.2);
    }
    
    .map-star {
      position: absolute;
      font-size: 24px;
      color: #ffd700;
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      display: none;
    }
    
    .map-star:hover {
      transform: scale(1.3);
    }
    
    .map-star.visible {
      display: block;
    }
    
    .skam-logo {
      position: absolute;
      font-size: 18px;
      font-weight: bold;
      color: #e91e63;
      cursor: pointer;
      z-index: 10;
      background: white;
      padding: 4px 8px;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      display: none;
    }
    
         .skam-logo.visible {
       display: block;
     }
     
     .clickable-overlay {
       position: absolute;
       cursor: pointer;
       z-index: 15;
       transition: all 0.3s ease;
       transform-origin: center;
     }
     
     .clickable-overlay:hover {
       transform: scale(1.2);
       filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
     }
     
     .location-marker {
       position: absolute;
       width: 8px;
       height: 8px;
       border-radius: 50%;
       border: 2px solid white;
       box-shadow: 0 2px 4px rgba(0,0,0,0.3);
       pointer-events: none;
       z-index: 12;
     }
     
     .map-overlay {
       border-radius: 12px;
     }
    
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    
    .modal-content {
      background-color: #fdfcf7;
      margin: 15% auto;
      padding: 30px;
      border-radius: 12px;
      width: 80%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 4px 24px rgba(0,0,0,0.2);
    }
    
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      margin-top: -20px;
      margin-right: -10px;
    }
    
    .close:hover {
      color: #000;
    }
    
    .question {
      font-size: 1.2em;
      margin: 20px 0;
      color: #2c3e50;
    }
    
    .answer-input {
      width: 100%;
      padding: 12px;
      font-size: 1.1em;
      border: 2px solid #bcd7b0;
      border-radius: 8px;
      margin: 15px 0;
      font-family: 'EB Garamond', serif;
    }
    
    .submit-btn {
      background: #bcd7b0;
      color: #2c3e50;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      font-family: 'EB Garamond', serif;
      font-weight: 600;
    }
    
    .submit-btn:hover {
      background: #a8c49a;
    }
    
    .easter-egg-progress {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.9);
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 0.9em;
      color: #2c3e50;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: none;
    }
  </style>
</head>
<body>
  <script src="shared.js"></script>
  <main>
    <h1>Kart</h1>
    <p>Her finner du kart og veibeskrivelse til bryllupslokalet og paviljongen i Torshovparken.</p>
    
    <div class="easter-egg-progress" id="progress">
      üîç Spillprogress: <span id="progress-text">0/3</span>
    </div>
    
    <div class="easter-egg-container">
      <iframe src="https://www.google.com/maps?q=Falchs+Paviljong+Torshovparken+Oslo&z=15&output=embed" width="100%" height="300" style="border-radius: 12px; border: 1px solid #bcd7b0;"></iframe>
      <div class="easter-egg-overlay" id="map-trigger"></div>
      <div style="margin-top: 0.7em; font-size: 1.08em; text-align: center;"><strong>Falchs paviljong (vielse):</strong> Torshovparken, 0476 Oslo</div>
    </div>
    
    <div class="interactive-map" id="interactive-map" style="display: none;">
      <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,255,255,0.95); padding: 8px 12px; border-radius: 6px; font-size: 0.9em; z-index: 20; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        üó∫Ô∏è Interaktivt Oslo-kart - Finn de skjulte hintene!
      </div>
      
      <!-- Real Google Maps embed for Oslo with custom markers -->
      <div id="oslo-map" style="width: 100%; height: 100%; border-radius: 12px; position: relative;">
        <iframe 
          id="oslo-iframe"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15999.6!2d10.7522!3d59.9285!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46416e61f267f039%3A0x7e92605fd3231e9a!2sTorshovparken%2C%20Oslo!5e0!3m2!1sen!2sno!4v1703123456789" 
          width="100%" 
          height="100%" 
          style="border:0; border-radius: 12px;" 
          allowfullscreen="" 
          loading="lazy">
        </iframe>
        
        <!-- Custom overlay with clickable areas -->
        <div class="map-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
          
          <!-- T√∏yenparken star (approximate position south of T√∏yenbadet) -->
          <div class="map-star clickable-overlay" id="toyenparken-star" 
               style="top: 45%; left: 65%; pointer-events: auto;" 
               title="T√∏yenparken - Klikk her!">‚≠ê</div>
          
          <!-- Deichmans gate SKAM logo (Hartvig Nissens skole area) -->
          <div class="skam-logo clickable-overlay" id="skam-logo" 
               style="top: 35%; left: 45%; pointer-events: auto;"
               title="Deichmans gate - SKAM kollektiv">SKAM</div>
               
          <!-- Additional visual markers for context -->
          <div class="location-marker" style="top: 25%; left: 55%; background: #4CAF50;" title="Torshovparken"></div>
          <div class="location-marker" style="top: 45%; left: 65%; background: #2196F3;" title="T√∏yenparken"></div>
          <div class="location-marker" style="top: 35%; left: 45%; background: #E91E63;" title="Deichmans gate"></div>
        </div>
      </div>
    </div>
    
    <div style="margin: 2em 0;">
      <iframe src="https://www.google.com/maps?q=M√•nefisken+Sagveien+23A+Oslo&output=embed" width="100%" height="300" style="border-radius: 12px; border: 1px solid #bcd7b0;"></iframe>
      <div style="margin-top: 0.7em; font-size: 1.08em; text-align: center;"><strong>M√•nefisken (middag og fest):</strong> Sagveien 23A, 0459 Oslo</div>
    </div>
    
    <ul class="info-list" style="list-style: none; padding-left: 0; display:none;">
      <li><strong>M√•nefisken:</strong> Sagveien 23A, 0459 Oslo</li>
      <li><strong>Falchs paviljong (vielse):</strong> Torshovparken, 0476 Oslo</li>
    </ul>
  </main>
  
  <!-- Modal for questions -->
  <div id="questionModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="modal-title">üïµÔ∏è Sp√∏rsm√•l om Karoline & Torkil</h2>
      <div class="question" id="modal-question"></div>
      <input type="text" id="answer-input" class="answer-input" placeholder="Skriv ditt svar her...">
      <br>
      <button id="submit-answer" class="submit-btn">Send svar</button>
      <div id="feedback" style="margin-top: 15px; font-weight: 600;"></div>
    </div>
  </div>

  <footer>
    ¬© Karoline & Torkil 2026
  </footer>

  <script>
    let gameState = {
      currentClue: 0,
      answers: ['t√∏yenparken', 'skam-kollektiv', 'completed'] // Accept variations
    };

         const questions = [
       {
         title: "üå≥ F√∏rste hint!",
         question: "Hvor hadde Karoline og Torkil f√∏rste date? Klikk p√• stedet p√• kartet!",
         hasInput: false
       },
       {
         title: "üè† Andre sp√∏rsm√•l!",
         question: "I hvilket ber√∏mte kollektiv m√∏ttes Karoline og Torkil f√∏rste gang? Finn stedet p√• kartet!",
         hasInput: false
       },
       {
         title: "üéâ Gratulerer!",
         question: "Du har funnet alle hintene! Karoline og Torkil sine hemmeligheter er avsl√∏rt. üíï",
         hasInput: false
       }
     ];

    const modal = document.getElementById('questionModal');
    const mapTrigger = document.getElementById('map-trigger');
    const interactiveMap = document.getElementById('interactive-map');
    const toyenparkenStar = document.getElementById('toyenparken-star');
    const skamLogo = document.getElementById('skam-logo');
    const closeBtn = document.querySelector('.close');
    const submitBtn = document.getElementById('submit-answer');
    const answerInput = document.getElementById('answer-input');
    const progress = document.getElementById('progress');
    const progressText = document.getElementById('progress-text');

    function updateProgress() {
      progressText.textContent = `${gameState.currentClue}/3`;
      progress.style.display = gameState.currentClue > 0 ? 'block' : 'none';
    }

         function showQuestion(questionIndex) {
       const question = questions[questionIndex];
       document.getElementById('modal-title').textContent = question.title;
       document.getElementById('modal-question').textContent = question.question;
       document.getElementById('feedback').textContent = '';
       
       // Hide input field and submit button for all questions since we click on map
       answerInput.style.display = 'none';
       submitBtn.style.display = 'none';
       
       modal.style.display = 'block';
       
       // Auto-close the modal after showing the question to let user interact with map
       if (questionIndex < 2) {
         setTimeout(() => {
           modal.style.display = 'none';
         }, 3000);
       }
     }

         function showSuccessMessage(message) {
       const feedback = document.getElementById('feedback');
       feedback.textContent = message;
       feedback.style.color = '#27ae60';
       document.getElementById('modal-question').textContent = message;
       modal.style.display = 'block';
       
       setTimeout(() => {
         modal.style.display = 'none';
       }, 2500);
     }
     
     function advanceGame() {
       gameState.currentClue++;
       updateProgress();
       
       if (gameState.currentClue === 1) {
         // Show interactive map and star after first question
         showSuccessMessage('üéâ Riktig! Finn neste hint p√• kartet nedenfor!');
         setTimeout(() => {
           interactiveMap.style.display = 'block';
           toyenparkenStar.classList.add('visible');
         }, 1000);
       } else if (gameState.currentClue === 2) {
         // Show SKAM logo after second correct click
         showSuccessMessage('üéâ Perfekt! N√• kan du finne det siste hintet!');
         setTimeout(() => {
           skamLogo.classList.add('visible');
         }, 1000);
       } else if (gameState.currentClue === 3) {
         // Game completed
         showQuestion(2);
       }
     }

         // Event listeners
     mapTrigger.addEventListener('click', function() {
       if (gameState.currentClue === 0) {
         showQuestion(0);
         advanceGame();
       }
     });

         toyenparkenStar.addEventListener('click', function() {
       if (gameState.currentClue === 1) {
         advanceGame();
         setTimeout(() => {
           showQuestion(1);
         }, 500);
       }
     });

     skamLogo.addEventListener('click', function() {
       if (gameState.currentClue === 2) {
         advanceGame();
       }
     });

    closeBtn.addEventListener('click', function() {
      modal.style.display = 'none';
    });

         // Remove input field event listeners since we don't use them anymore

    window.addEventListener('click', function(e) {
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });

    // Initialize
    updateProgress();
  </script>
</body>
</html>
